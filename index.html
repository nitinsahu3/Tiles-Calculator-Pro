<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Professional Material Area Cost Estimator</title>

<style>
body{
    font-family:Segoe UI, Arial;
    background:#f4f6f9;
    padding:20px;
}
.container{
    max-width:1000px;
    margin:auto;
}
.card{
    background:#fff;
    padding:20px;
    border-radius:12px;
    box-shadow:0 6px 18px rgba(0,0,0,0.08);
    margin-bottom:20px;
}
h2{
    margin-bottom:15px;
    color:#2c3e50;
}
input,select,button{
    width:100%;
    padding:10px;
    margin:8px 0;
    font-size:15px;
    border-radius:6px;
    border:1px solid #ddd;
}
button{
    background:#2c3e50;
    color:#fff;
    border:none;
    font-weight:600;
    cursor:pointer;
}
button:hover{
    background:#1a252f;
}
.section-row{
    display:flex;
    gap:6px;
    align-items:center;
}
.section-row input{
    width:40%;
}
.remove-btn{
    width:32px;
    height:32px;
    background:#e74c3c;
    color:#fff;
    border:none;
    border-radius:6px;
    cursor:pointer;
}
.result{
    margin-top:12px;
    font-weight:600;
    font-size:14px;
}
.history-item{
    background:#eef1f5;
    padding:12px;
    border-radius:8px;
    margin-bottom:8px;
    display:flex;
    justify-content:space-between;
}
.history-content{
    max-width:90%;
}
.delete-btn{
    background:#e74c3c;
    color:#fff;
    border:none;
    border-radius:50%;
    width:22px;
    height:22px;
    font-size:12px;
    cursor:pointer;
}
.small-btn{
    background:#7f8c8d;
}
</style>
</head>

<body>
<div class="container">

<!-- RATE SECTION -->
<div class="card">
<h2>Material Rate Calculator</h2>

<label>Material Name (Optional)</label>
<input type="text" id="materialName">

<label>Dimension Unit</label>
<select id="unitSelect">
<option value="ft">Feet</option>
<option value="in">Inches</option>
<option value="cm">Centimeters</option>
<option value="mm">Millimeters</option>
</select>

<label>Unit Length</label>
<input type="number" id="length">

<label>Unit Width</label>
<input type="number" id="width">

<label>Pricing Type</label>
<select id="pricingType">
<option value="piece">Rate per Piece</option>
<option value="box">Rate per Box</option>
<option value="sqft">Rate per Square Foot</option>
</select>

<label>Rate (Rs.)</label>
<input type="number" id="rate">

<div id="boxField" style="display:none;">
<label>Pieces per Box</label>
<input type="number" id="unitsPerBox">
</div>

<button onclick="calculateRate()">Calculate</button>
<div class="result" id="rateOutput"></div>
</div>

<!-- MANUAL ENTRY -->
<div class="card">
<h2>Manual Entry</h2>

<label>Total Area (sq ft)</label>
<input type="number" id="manualArea">

<label>OR Total Pieces</label>
<input type="number" id="manualPieces">

<label>OR Total Boxes</label>
<input type="number" id="manualBoxes">

<label>OR Total Cost (Rs.)</label>
<input type="number" id="manualCost">

<button onclick="calculateManual()">Calculate</button>
<div class="result" id="manualOutput"></div>
</div>

<!-- ROOM DIMENSIONS -->
<div class="card">
<h2>Room Dimensions</h2>

<label>Dimension Unit</label>
<select id="roomUnitSelect">
<option value="ft">Feet</option>
<option value="in">Inches</option>
<option value="cm">Centimeters</option>
<option value="mm">Millimeters</option>
</select>

<div id="walls"></div>
<button onclick="addWall()">Add Wall</button>

<label>Wastage %</label>
<input type="number" id="roomWastage" value="5">

<button onclick="calculateRoom()">Calculate Room</button>
<div class="result" id="roomOutput"></div>
</div>

<!-- HISTORY -->
<div class="card">
<h2>History</h2>
<div id="history"></div>
<button class="small-btn" onclick="clearHistory()">Clear All</button>
</div>

</div>

<script>

let costPerSqFt=0;
let areaPerPiece=0;

document.getElementById("pricingType").addEventListener("change",function(){
    document.getElementById("boxField").style.display =
        this.value==="box"?"block":"none";
});

function convertToFeet(value,unit){
    if(isNaN(value)) return NaN;
    switch(unit){
        case "ft": return value;
        case "in": return value/12;
        case "cm": return value/30.48;
        case "mm": return value/304.8;
        default: return NaN;
    }
}

/* RATE */
function calculateRate(){

    let name=document.getElementById("materialName").value||"Material";
    let unit=document.getElementById("unitSelect").value;

    let l=convertToFeet(parseFloat(document.getElementById("length").value),unit);
    let w=convertToFeet(parseFloat(document.getElementById("width").value),unit);
    let rate=parseFloat(document.getElementById("rate").value);
    let type=document.getElementById("pricingType").value;
    let piecesPerBox=parseFloat(document.getElementById("unitsPerBox").value);

    if(isNaN(l)||isNaN(w)||isNaN(rate)){
        alert("Enter Length, Width and Rate");
        return;
    }

    areaPerPiece=l*w;

    let ratePerPiece=0;
    let ratePerBox=0;

    if(type==="piece"){
        ratePerPiece=rate;
        ratePerBox=!isNaN(piecesPerBox)?rate*piecesPerBox:0;
        costPerSqFt=ratePerPiece/areaPerPiece;
    }

    if(type==="box"){
        if(isNaN(piecesPerBox)){
            alert("Enter Pieces per Box");
            return;
        }
        ratePerBox=rate;
        ratePerPiece=rate/piecesPerBox;
        costPerSqFt=ratePerPiece/areaPerPiece;
    }

    if(type==="sqft"){
        costPerSqFt=rate;
        ratePerPiece=rate*areaPerPiece;
        ratePerBox=!isNaN(piecesPerBox)?ratePerPiece*piecesPerBox:0;
    }

    let areaPerBox=!isNaN(piecesPerBox)?areaPerPiece*piecesPerBox:0;

    let html=`<strong>${name}</strong><br>
              Area per Piece: ${areaPerPiece.toFixed(3)} sq ft<br>
              ${!isNaN(piecesPerBox)?`Area per Box: ${areaPerBox.toFixed(3)} sq ft<br>`:''}
              Rate per Piece: Rs. ${ratePerPiece.toFixed(2)}<br>
              ${ratePerBox?`Rate per Box: Rs. ${ratePerBox.toFixed(2)}<br>`:''}
              Rate per sq ft: Rs. ${costPerSqFt.toFixed(2)}`;

    document.getElementById("rateOutput").innerHTML=html;
    saveHistory("Rate Calculation",html);
}

/* MANUAL ENTRY */
function calculateManual(){

    if(areaPerPiece===0 || costPerSqFt===0){
        alert("Calculate rate first");
        return;
    }

    let area=parseFloat(document.getElementById("manualArea").value);
    let pieces=parseFloat(document.getElementById("manualPieces").value);
    let boxes=parseFloat(document.getElementById("manualBoxes").value);
    let cost=parseFloat(document.getElementById("manualCost").value);
    let piecesPerBox=parseFloat(document.getElementById("unitsPerBox").value);

    if(isNaN(area)&&isNaN(pieces)&&isNaN(boxes)&&isNaN(cost)){
        alert("Enter any one value");
        return;
    }

    if(!isNaN(boxes)){
        if(isNaN(piecesPerBox)){
            alert("Enter Pieces per Box");
            return;
        }
        pieces=boxes*piecesPerBox;
        area=pieces*areaPerPiece;
        cost=area*costPerSqFt;
    }

    if(!isNaN(pieces)&&isNaN(area)){
        area=pieces*areaPerPiece;
        cost=area*costPerSqFt;
    }

    if(!isNaN(area)&&isNaN(pieces)){
        pieces=Math.ceil(area/areaPerPiece);
        cost=area*costPerSqFt;
    }

    if(!isNaN(cost)&&isNaN(area)){
        area=cost/costPerSqFt;
        pieces=Math.ceil(area/areaPerPiece);
    }

    let html=`Area: ${area.toFixed(2)} sq ft<br>
              Pieces: ${pieces}<br>
              Total Cost: Rs. ${cost.toFixed(2)}`;

    document.getElementById("manualOutput").innerHTML=html;
    saveHistory("Manual Entry",html);
}

/* ROOM */
function addWall(){
    let div=document.createElement("div");
    div.className="section-row";
    div.innerHTML=
        `<input type="number" placeholder="Length">
         <input type="number" placeholder="Width">
         <button class="remove-btn" onclick="this.parentElement.remove()">&times;</button>`;
    document.getElementById("walls").appendChild(div);
}

function calculateRoom(){

    if(areaPerPiece===0 || costPerSqFt===0){
        alert("Calculate rate first");
        return;
    }

    let unit=document.getElementById("roomUnitSelect").value;
    let totalArea=0;

    document.querySelectorAll("#walls .section-row").forEach(w=>{
        let l=convertToFeet(parseFloat(w.children[0].value),unit);
        let w2=convertToFeet(parseFloat(w.children[1].value),unit);
        if(!isNaN(l)&&!isNaN(w2)){
            totalArea+=l*w2;
        }
    });

    if(totalArea===0){
        alert("Enter valid dimensions");
        return;
    }

    let wastage=parseFloat(document.getElementById("roomWastage").value)||0;
    totalArea*=1+(wastage/100);

    let piecesRequired=Math.ceil(totalArea/areaPerPiece);
    let totalCost=totalArea*costPerSqFt;

    let html=`Total Area (with wastage): ${totalArea.toFixed(2)} sq ft<br>
              Pieces Required: ${piecesRequired}<br>
              Total Cost: Rs. ${totalCost.toFixed(2)}`;

    document.getElementById("roomOutput").innerHTML=html;
    saveHistory("Room Dimensions",html);
}

/* HISTORY */
function saveHistory(title,data){
    let history=JSON.parse(localStorage.getItem("materialHistory")||"[]");
    history.unshift(`<strong>${title}</strong><br>${data}`);
    localStorage.setItem("materialHistory",JSON.stringify(history));
    loadHistory();
}

function loadHistory(){
    let history=JSON.parse(localStorage.getItem("materialHistory")||"[]");
    let div=document.getElementById("history");
    div.innerHTML="";
    history.forEach((item,i)=>{
        let box=document.createElement("div");
        box.className="history-item";
        box.innerHTML=`<div class="history-content">${item}</div>
                       <button class="delete-btn" onclick="deleteHistory(${i})">&times;</button>`;
        div.appendChild(box);
    });
}

function deleteHistory(i){
    let history=JSON.parse(localStorage.getItem("materialHistory")||"[]");
    history.splice(i,1);
    localStorage.setItem("materialHistory",JSON.stringify(history));
    loadHistory();
}

function clearHistory(){
    localStorage.removeItem("materialHistory");
    loadHistory();
}

loadHistory();

</script>
</body>
</html>
